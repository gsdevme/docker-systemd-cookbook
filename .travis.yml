language: ruby
dist: trusty

matrix:
  include:
    - rvm: 2.4
      env: suite=centos-7

sudo: required
services: docker

before_script:
  # https://github.com/zuazo/kitchen-in-travis-native/issues/1#issuecomment-142455888
  - sudo iptables -L DOCKER || sudo iptables -N DOCKER
  - make install
  - make bundle
#  - make style

script: KITCHEN_LOCAL_YAML=.kitchen.docker.yml bundle exec kitchen test "$suite"
